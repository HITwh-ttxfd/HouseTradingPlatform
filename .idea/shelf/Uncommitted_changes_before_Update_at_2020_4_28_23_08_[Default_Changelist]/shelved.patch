Index: SpringBoot RESTful/src/main/java/entity/House.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package entity;\r\n\r\n\r\nimport java.util.Date;\r\n\r\npublic class House {\r\n    //小区介绍、户型介绍、装修描述、税费解析、核心卖点\r\n    //房屋户型、建筑面积、套内面积、房屋朝向、装修情况、供暖方式、所在楼层、户型结构、建筑类型、梯户比例、配置电梯\r\n    //挂牌时间、上次交易、房屋年限、抵押信息、交易权属、房屋用途、产权所属、房本配件\r\n    //房子ID，卖家ID、评分、地理位置、价格\r\n    private String houseID;     //主键\r\n    private String sellerID;\r\n\r\n    //可筛选信息                                             筛选时\r\n    private double size;                     //建筑面积      默认为0\r\n    private String location;                 //地理位置      默认为all\r\n    private String village;                  //小区\r\n    private double price;                    //价格         默认max与min为0\r\n    private float score;                     //评分         默认0               满分5分\r\n    //    private Date  ListingTime;               //建成时间      默认all 筛time1和time2之间的ListingTime;                    //挂牌时间\r\n    private Date  time;                      //建成时间      默认all 筛time1和time2之间的\r\n    private int  lift;                       //配置电梯\r\n    private double locationX;\r\n    private double locationY;\r\n\r\n\r\n    //一系列详细信息\r\n//    private String CommunityIntroduction;   //小区介绍\r\n//    private String houseTypeIntroduction;  //户型介绍\r\n//    private String decorationDescription;  //装修描述\r\n//    private String  taxAnalysis;          //税费解析\r\n//    private String coreSellingPoints;     //核心卖点\r\n    private String HouseType;              //房屋户型\r\n    private double buildingArea;           //建筑面积                     这里可能存在疑问\r\n    private double interiorArea;           //套内面积\r\n    private String houseOrientation;         //房屋朝向\r\n    private String decoration;               //装修情况\r\n    private String heatingMode;              //供暖方式\r\n    private String floor;                   //所在楼层\r\n    private String houseTypeStructure;      //户型结构\r\n    private String buildingType;            //建筑类型\r\n    private String elevatorProportion;       //梯户比例\r\n    private Date  lastTransaction;           //上次交易\r\n    private Date  ListingTime;               //挂牌时间\r\n    private String  housingAge;                    //房屋年限\r\n    private String  mortgageInformation;            //抵押信息\r\n    private String  transactionOwnership;            //交易权属\r\n    private String  housingPurpose;                  //房屋用途\r\n    private String  propertyOwnership;               //产权所属\r\n    private String  housingParts;                    //房本配件\r\n\r\n\r\n    public House(){\r\n\r\n    };\r\n    //最为健全的house，用于向前端发送\r\n    //28个参数\r\n\r\n    public House(String village,Date  time,\r\n                 String houseID, String sellerID,\r\n                 double size, double locationX,\r\n                 double locationY, String location,\r\n                 double price, float score,\r\n                 int lift, Date lastTransaction,\r\n                 String houseType, double buildingArea,\r\n                 double interiorArea, String houseOrientation,\r\n                 String decoration, String heatingMode,\r\n                 String floor, String houseTypeStructure,\r\n                 String buildingType, String elevatorProportion,\r\n                 Date listingTime, String housingAge,\r\n                 String mortgageInformation, String transactionOwnership,\r\n                 String housingPurpose, String propertyOwnership,\r\n                 String housingParts) {\r\n        this.village=village;\r\n        this.time=time;\r\n        this.houseID = houseID;\r\n        this.sellerID = sellerID;\r\n        this.size = size;\r\n        this.locationX = locationX;\r\n        this.locationY = locationY;\r\n        this.location = location;\r\n        this.price = price;\r\n        this.score = score;\r\n        this.lift = lift;\r\n        this.lastTransaction = lastTransaction;\r\n        this.HouseType = houseType;\r\n        this.buildingArea = buildingArea;\r\n        this.interiorArea = interiorArea;\r\n        this.houseOrientation = houseOrientation;\r\n        this.decoration = decoration;\r\n        this.heatingMode = heatingMode;\r\n        this.floor = floor;\r\n        this.houseTypeStructure = houseTypeStructure;\r\n        this.buildingType = buildingType;\r\n        this.elevatorProportion = elevatorProportion;\r\n        this.ListingTime = listingTime;\r\n        this.housingAge = housingAge;\r\n        this.mortgageInformation = mortgageInformation;\r\n        this.transactionOwnership = transactionOwnership;\r\n        this.housingPurpose = housingPurpose;\r\n        this.propertyOwnership = propertyOwnership;\r\n        this.housingParts = housingParts;\r\n    }\r\n\r\n\r\n    //去掉了houseid与score   默认score=0\r\n    //用于接收前端传过来的房源\r\n\r\n//    public House(String sellerID, double size,\r\n//                 double locationX, double locationY,\r\n//                 String location, double price,\r\n//                 int lift, Date lastTransaction,\r\n//                 String houseType, double buildingArea,\r\n//                 double interiorArea, String houseOrientation,\r\n//                 String decoration, String heatingMode,\r\n//                 String floor, String houseTypeStructure,\r\n//                 String buildingType, String elevatorProportion,\r\n//                 Date listingTime, String housingAge,\r\n//                 String mortgageInformation, String transactionOwnership,\r\n//                 String housingPurpose, String propertyOwnership,\r\n//                 String housingParts) {\r\n//        this.sellerID = sellerID;\r\n//        this.size = size;\r\n//        this.locationX = locationX;\r\n//        this.locationY = locationY;\r\n//        this.location = location;\r\n//        this.price = price;\r\n//        this.score = 0;\r\n//        this.lift = lift;\r\n//        this.lastTransaction = lastTransaction;\r\n//        HouseType = houseType;\r\n//        this.buildingArea = buildingArea;\r\n//        this.interiorArea = interiorArea;\r\n//        this.houseOrientation = houseOrientation;\r\n//        this.decoration = decoration;\r\n//        this.heatingMode = heatingMode;\r\n//        this.floor = floor;\r\n//        this.houseTypeStructure = houseTypeStructure;\r\n//        this.buildingType = buildingType;\r\n//        this.elevatorProportion = elevatorProportion;\r\n//        ListingTime = listingTime;\r\n//        this.housingAge = housingAge;\r\n//        this.mortgageInformation = mortgageInformation;\r\n//        this.transactionOwnership = transactionOwnership;\r\n//        this.housingPurpose = housingPurpose;\r\n//        this.propertyOwnership = propertyOwnership;\r\n//        this.housingParts = housingParts;\r\n//    }\r\n\r\n\r\n    public String getVillage() {\r\n        return village;\r\n    }\r\n\r\n    public void setVillage(String village) {\r\n        this.village = village;\r\n    }\r\n\r\n    public Date getTime() {\r\n        return time;\r\n    }\r\n\r\n    public void setTime(Date time) {\r\n        this.time = time;\r\n    }\r\n    public String getHouseID() {\r\n        return houseID;\r\n    }\r\n\r\n    public void setHouseID(String houseID) {\r\n        this.houseID = houseID;\r\n    }\r\n\r\n    public String getSellerID() {\r\n        return sellerID;\r\n    }\r\n\r\n    public void setSellerID(String sellerID) {\r\n        this.sellerID = sellerID;\r\n    }\r\n\r\n    public double getSize() {\r\n        return size;\r\n    }\r\n\r\n    public void setSize(double size) {\r\n        this.size = size;\r\n    }\r\n\r\n    public double getLocationX() {\r\n        return locationX;\r\n    }\r\n\r\n    public void setLocationX(double locationX) {\r\n        this.locationX = locationX;\r\n    }\r\n\r\n    public double getLocationY() {\r\n        return locationY;\r\n    }\r\n\r\n    public void setLocationY(double locationY) {\r\n        this.locationY = locationY;\r\n    }\r\n\r\n    public String getLocation() {\r\n        return location;\r\n    }\r\n\r\n    public void setLocation(String location) {\r\n        this.location = location;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public float getScore() {\r\n        return score;\r\n    }\r\n\r\n    public void setScore(float score) {\r\n        this.score = score;\r\n    }\r\n\r\n\r\n    public int getLift() {\r\n        return lift;\r\n    }\r\n\r\n    public void setLift(int lift) {\r\n        this.lift = lift;\r\n    }\r\n\r\n    public String getHouseType() {\r\n        return HouseType;\r\n    }\r\n\r\n    public void setHouseType(String houseType) {\r\n        HouseType = houseType;\r\n    }\r\n\r\n    public double getBuildingArea() {\r\n        return buildingArea;\r\n    }\r\n\r\n    public void setBuildingArea(double buildingArea) {\r\n        this.buildingArea = buildingArea;\r\n    }\r\n\r\n    public double getInteriorArea() {\r\n        return interiorArea;\r\n    }\r\n\r\n    public void setInteriorArea(double interiorArea) {\r\n        this.interiorArea = interiorArea;\r\n    }\r\n\r\n    public String getHouseOrientation() {\r\n        return houseOrientation;\r\n    }\r\n\r\n    public void setHouseOrientation(String houseOrientation) {\r\n        this.houseOrientation = houseOrientation;\r\n    }\r\n\r\n    public String getDecoration() {\r\n        return decoration;\r\n    }\r\n\r\n    public void setDecoration(String decoration) {\r\n        this.decoration = decoration;\r\n    }\r\n\r\n    public String getHeatingMode() {\r\n        return heatingMode;\r\n    }\r\n\r\n    public void setHeatingMode(String heatingMode) {\r\n        this.heatingMode = heatingMode;\r\n    }\r\n\r\n    public String getFloor() {\r\n        return floor;\r\n    }\r\n\r\n    public void setFloor(String floor) {\r\n        this.floor = floor;\r\n    }\r\n\r\n    public String getHouseTypeStructure() {\r\n        return houseTypeStructure;\r\n    }\r\n\r\n    public void setHouseTypeStructure(String houseTypeStructure) {\r\n        this.houseTypeStructure = houseTypeStructure;\r\n    }\r\n\r\n    public String getBuildingType() {\r\n        return buildingType;\r\n    }\r\n\r\n    public void setBuildingType(String buildingType) {\r\n        this.buildingType = buildingType;\r\n    }\r\n\r\n    public String getElevatorProportion() {\r\n        return elevatorProportion;\r\n    }\r\n\r\n    public void setElevatorProportion(String elevatorProportion) {\r\n        this.elevatorProportion = elevatorProportion;\r\n    }\r\n\r\n    public Date getListingTime() {\r\n        return ListingTime;\r\n    }\r\n\r\n    public void setListingTime(Date listingTime) {\r\n        ListingTime = listingTime;\r\n    }\r\n\r\n    public Date getLastTransaction() {\r\n        return lastTransaction;\r\n    }\r\n\r\n    public void setLastTransaction(Date lastTransaction) {\r\n        this.lastTransaction = lastTransaction;\r\n    }\r\n\r\n    public String getHousingAge() {\r\n        return housingAge;\r\n    }\r\n\r\n    public void setHousingAge(String housingAge) {\r\n        this.housingAge = housingAge;\r\n    }\r\n\r\n    public String getMortgageInformation() {\r\n        return mortgageInformation;\r\n    }\r\n\r\n    public void setMortgageInformation(String mortgageInformation) {\r\n        this.mortgageInformation = mortgageInformation;\r\n    }\r\n\r\n    public String getTransactionOwnership() {\r\n        return transactionOwnership;\r\n    }\r\n\r\n    public void setTransactionOwnership(String transactionOwnership) {\r\n        this.transactionOwnership = transactionOwnership;\r\n    }\r\n\r\n    public String getHousingPurpose() {\r\n        return housingPurpose;\r\n    }\r\n\r\n    public void setHousingPurpose(String housingPurpose) {\r\n        this.housingPurpose = housingPurpose;\r\n    }\r\n\r\n    public String getPropertyOwnership() {\r\n        return propertyOwnership;\r\n    }\r\n\r\n    public void setPropertyOwnership(String propertyOwnership) {\r\n        this.propertyOwnership = propertyOwnership;\r\n    }\r\n\r\n    public String getHousingParts() {\r\n        return housingParts;\r\n    }\r\n\r\n    public void setHousingParts(String housingParts) {\r\n        this.housingParts = housingParts;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- SpringBoot RESTful/src/main/java/entity/House.java	(revision 46809e44a8aca8b3ae7fe59ec1427c80649de319)
+++ SpringBoot RESTful/src/main/java/entity/House.java	(date 1588086500037)
@@ -30,6 +30,7 @@
 //    private String decorationDescription;  //装修描述
 //    private String  taxAnalysis;          //税费解析
 //    private String coreSellingPoints;     //核心卖点
+    private int count;                     //评价数量
     private String HouseType;              //房屋户型
     private double buildingArea;           //建筑面积                     这里可能存在疑问
     private double interiorArea;           //套内面积
@@ -54,9 +55,9 @@
 
     };
     //最为健全的house，用于向前端发送
-    //28个参数
+    //29个参数
 
-    public House(String village,Date  time,
+    public House(int count,String village,Date  time,
                  String houseID, String sellerID,
                  double size, double locationX,
                  double locationY, String location,
@@ -71,6 +72,7 @@
                  String mortgageInformation, String transactionOwnership,
                  String housingPurpose, String propertyOwnership,
                  String housingParts) {
+        this.count=count;
         this.village=village;
         this.time=time;
         this.houseID = houseID;
@@ -148,6 +150,14 @@
 //    }
 
 
+    public int getCount() {
+        return count;
+    }
+
+    public void setCount(int count) {
+        this.count = count;
+    }
+
     public String getVillage() {
         return village;
     }
Index: SpringBoot RESTful/src/main/java/connector/HouseDBconnection.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package connector;\r\n\r\n\r\nimport entity.House;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport java.sql.*;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\n\r\n\r\npublic class HouseDBconnection {\r\n    //上传项目专用\r\n    String driver = \"com.mysql.cj.jdbc.Driver\";\r\n    String url = \"jdbc:mysql://39.98.48.34:3306/htpbase?serverTimezone=UTC\";\r\n    String user = \"root\";\r\n    String password = \"2296026\";\r\n    Connection connection = null;\r\n\r\n\r\n    //构造函数\r\n    public HouseDBconnection(){\r\n        try {\r\n            Class.forName(driver);\r\n            connection=(Connection) DriverManager.getConnection(url,user,password);\r\n            if(!connection.isClosed()){\r\n                System.out.println(\"Successfully connected.\");\r\n            }\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    //增加房源\r\n    public void addHouse(House house){\r\n        if(house==null){\r\n            System.out.println(\"House is null, can't insert.\");\r\n            return;\r\n        }\r\n        //加上一个查询先有houseID最大值的，给houseID赋值\r\n        house.setHouseID(selectMaxHouseID());\r\n        String sql=\"insert into house(village,time,houseID,sellerID, size, locationX, locationY, location, price,score, lift, lastTransaction, houseType, buildingArea, interiorArea, houseOrientation, decoration, heatingMode, floor, houseTypeStructure, buildingType, elevatorProportion, listingTime, housingAge, mortgageInformation, transactionOwnership, housingPurpose, propertyOwnership, housingParts)\" +\r\n                \" values('\"+house.getVillage()+\"','\"+house.getTime()+\"','\"\r\n                +house.getHouseID()+\"',\"+house.getLocationX()\r\n                +\",\"+house.getLocationY()+\",'\"+house.getLocation()+\"',\"\r\n                +house.getPrice()+\",\"+house.getScore()+\",\"\r\n                +house.getLift()+\",'\"+house.getLastTransaction()+\"','\"\r\n                +house.getHouseType()+\"',\"+house.getBuildingArea()+\",'\"\r\n                +house.getInteriorArea()+\"','\"+house.getHouseOrientation()+\"','\"\r\n                +house.getDecoration()+\"','\"+house.getHeatingMode()+\"','\"\r\n                +house.getFloor()+\"','\"+house.getHouseTypeStructure()+\"','\"\r\n                +house.getBuildingType()+\"','\"+house.getElevatorProportion()+\"',\"\r\n                +house.getListingTime()+\",'\"+house.getHousingAge()+\"','\"\r\n                +house.getMortgageInformation()+\"','\"+house.getTransactionOwnership()+\"','\"\r\n                +house.getHousingPurpose()+\"','\"+house.getPropertyOwnership()+\"','\"\r\n                +house.getHousingParts()+\"')\";\r\n        try {\r\n            PreparedStatement preparedStatement = (PreparedStatement)this.connection.prepareStatement(sql);\r\n            preparedStatement.executeUpdate();\r\n            preparedStatement.close();\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    //查询HouseId最大值\r\n    public String selectMaxHouseID(){\r\n        String sql = \"select max(houseID) from house \";\r\n        String temp=\"\";\r\n        try {\r\n            Statement statement = this.connection.createStatement();\r\n            ResultSet resultSet = statement.executeQuery(sql);\r\n            while (resultSet.next()){\r\n                temp=resultSet.getString(\"max(houseID)\");\r\n            }\r\n            temp=String.valueOf(Integer.parseInt(temp)+1);\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return temp;\r\n    }\r\n\r\n    //   删除房源\r\n    public void deleteHouse(String houseID) {\r\n        String sql = \"delete from house where houseID='\"+houseID+\"'\";\r\n        try {\r\n            PreparedStatement preparedStatement = (PreparedStatement)this.connection.prepareStatement(sql);\r\n            preparedStatement.executeUpdate();\r\n            preparedStatement.close();\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    // 查找某一房源详细信息    第二次点击\r\n    public House getHouse(String houseID) {\r\n        String sql = \"select * from house where houseID='\"+houseID+\"'\";\r\n        House house=new House();\r\n        try {\r\n            Statement statement = (Statement)this.connection.createStatement();\r\n            ResultSet resultSet = (ResultSet)statement.executeQuery(sql);\r\n            while (resultSet.next()){\r\n                String village = resultSet.getString(\"village\");\r\n                Date time = resultSet.getDate(\"time\");\r\n                String sellerID = resultSet.getString(\"sellerID\");\r\n                double size = resultSet.getDouble(\"size\");\r\n                double locationX = resultSet.getDouble(\"locationX\");\r\n                double locationY = resultSet.getDouble(\"locationY\");\r\n                String location = resultSet.getString(\"location\");\r\n                double price = resultSet.getDouble(\"price\");\r\n                float score = resultSet.getFloat(\"score\");\r\n                int lift = resultSet.getInt(\"lift\");\r\n                String houseType = resultSet.getString(\"houseType\");\r\n                double buildingArea = resultSet.getDouble(\"buildingArea\");\r\n                double interiorArea = resultSet.getDouble(\"interiorArea\");\r\n                String houseOrientation = resultSet.getString(\"houseOrientation\");\r\n                String decoration = resultSet.getString(\"decoration\");\r\n                String heatingMode = resultSet.getString(\"heatingMode\");\r\n                String floor = resultSet.getString(\"floor\");\r\n                String houseTypeStructure = resultSet.getString(\"houseTypeStructure\");\r\n                String buildingType = resultSet.getString(\"buildingType\");\r\n                String elevatorProportion = resultSet.getString(\"elevatorProportion\");\r\n                Date listingTime = resultSet.getDate(\"listingTime\");\r\n                Date lastTransaction = resultSet.getDate(\"lastTransaction\");\r\n                String housingAge = resultSet.getString(\"housingAge\");\r\n                String mortgageInformation = resultSet.getString(\"mortgageInformation\");\r\n                String transactionOwnership = resultSet.getString(\"transactionOwnership\");\r\n                String housingPurpose = resultSet.getString(\"housingPurpose\");\r\n                String propertyOwnership = resultSet.getString(\"propertyOwnership\");\r\n                String housingParts = resultSet.getString(\"housingParts\");\r\n                House housetemp=new House(village,time,\r\n                        houseID, sellerID,\r\n                        size,locationX,\r\n                        locationY,location,\r\n                        price,score,\r\n                        lift,lastTransaction,\r\n                        houseType,buildingArea,\r\n                        interiorArea,houseOrientation,\r\n                        decoration,heatingMode,\r\n                        floor, houseTypeStructure,\r\n                        buildingType, elevatorProportion,\r\n                        listingTime, housingAge,\r\n                        mortgageInformation,transactionOwnership,\r\n                        housingPurpose,propertyOwnership,\r\n                        housingParts);\r\n                house=housetemp;\r\n                //测试用，正式上线删\r\n                System.out.println(resultSet.getString(\"houseID\")+\r\n                        resultSet.getString(\"sellerID\")+\r\n                        resultSet.getDouble(\"price\")+\r\n                        resultSet.getDouble(\"size\")\r\n                        +resultSet.getString(\"location\"));\r\n            }\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return house;\r\n    }\r\n\r\n    //返回所有house\r\n    public  ArrayList<House> getHouses() {\r\n        String sql = \"select * from house \";\r\n        ArrayList<House> houses = new ArrayList<House>();\r\n        try {\r\n            Statement statement = (Statement)this.connection.createStatement();\r\n            ResultSet resultSet = (ResultSet)statement.executeQuery(sql);\r\n            while (resultSet.next()){\r\n                String village = resultSet.getString(\"village\");\r\n                Date time = resultSet.getDate(\"time\");\r\n                String houseID = resultSet.getString(\"houseID\");\r\n                String sellerID = resultSet.getString(\"sellerID\");\r\n                double size = resultSet.getDouble(\"size\");\r\n                double locationX = resultSet.getDouble(\"locationX\");\r\n                double locationY = resultSet.getDouble(\"locationY\");\r\n                String location = resultSet.getString(\"location\");\r\n                double price = resultSet.getDouble(\"price\");\r\n                float score = resultSet.getFloat(\"score\");\r\n                int lift = resultSet.getInt(\"lift\");\r\n                String houseType = resultSet.getString(\"houseType\");\r\n                double buildingArea = resultSet.getDouble(\"buildingArea\");\r\n                double interiorArea = resultSet.getDouble(\"interiorArea\");\r\n                String houseOrientation = resultSet.getString(\"houseOrientation\");\r\n                String decoration = resultSet.getString(\"decoration\");\r\n                String heatingMode = resultSet.getString(\"heatingMode\");\r\n                String floor = resultSet.getString(\"floor\");\r\n                String houseTypeStructure = resultSet.getString(\"houseTypeStructure\");\r\n                String buildingType = resultSet.getString(\"buildingType\");\r\n                String elevatorProportion = resultSet.getString(\"elevatorProportion\");\r\n                Date listingTime = resultSet.getDate(\"listingTime\");\r\n                Date lastTransaction = resultSet.getDate(\"lastTransaction\");\r\n                String housingAge = resultSet.getString(\"housingAge\");\r\n                String mortgageInformation = resultSet.getString(\"mortgageInformation\");\r\n                String transactionOwnership = resultSet.getString(\"transactionOwnership\");\r\n                String housingPurpose = resultSet.getString(\"housingPurpose\");\r\n                String propertyOwnership = resultSet.getString(\"propertyOwnership\");\r\n                String housingParts = resultSet.getString(\"housingParts\");\r\n                House house=new House(village,time,\r\n                        houseID, sellerID,\r\n                        size,locationX,\r\n                        locationY,location,\r\n                        price,score,\r\n                        lift,lastTransaction,\r\n                        houseType,buildingArea,\r\n                        interiorArea,houseOrientation,\r\n                        decoration,heatingMode,\r\n                        floor, houseTypeStructure,\r\n                        buildingType, elevatorProportion,\r\n                        listingTime, housingAge,\r\n                        mortgageInformation,transactionOwnership,\r\n                        housingPurpose,propertyOwnership,\r\n                        housingParts);\r\n                houses.add(house);\r\n            }\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return houses;\r\n    }\r\n\r\n    //返回基本房源   第一次点击\r\n    public ArrayList<House> getBasicHouses() {\r\n        String sql = \"select * from house \";\r\n        ArrayList<House> houses = new ArrayList<House>();\r\n        try {\r\n            Statement statement = (Statement)this.connection.createStatement();\r\n            ResultSet resultSet = (ResultSet)statement.executeQuery(sql);\r\n            while (resultSet.next()){\r\n                House house=new House();\r\n                house.setHouseID(resultSet.getString(\"houseID\"));\r\n                house.setSellerID(resultSet.getString(\"sellerID\"));\r\n                house.setScore(resultSet.getFloat(\"score\"));\r\n                house.setPrice(resultSet.getDouble(\"price\"));\r\n                house.setSize(resultSet.getDouble(\"size\"));\r\n                house.setLocation(resultSet.getString(\"location\"));\r\n                house.setVillage(resultSet.getString(\"village\"));\r\n                //测试用，正式上线删\r\n                System.out.println(resultSet.getString(\"houseID\")+\r\n                        resultSet.getString(\"sellerID\")+\r\n                        resultSet.getDouble(\"price\")+\r\n                        resultSet.getDouble(\"size\")\r\n                        + resultSet.getFloat(\"score\")\r\n                        +resultSet.getString(\"location\"));\r\n                houses.add(house);\r\n            }\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return houses;\r\n    }\r\n\r\n    //修改房源价格（房子也就价格可以修改了）\r\n    public void changeHousePrice(String houseID, double price){\r\n        String sql = \"UPDATE house SET price = \"+price+\" WHERE houseID ='\"+houseID+\"'\";\r\n        try {\r\n            PreparedStatement preparedStatement = (PreparedStatement)this.connection.prepareStatement(sql);\r\n            preparedStatement.executeUpdate();\r\n            preparedStatement.close();\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    //修改房源评价分数\r\n    public void changeHouseScore(float score, String houseID){\r\n        String sql = \"UPDATE house SET score = \"+score+\" WHERE houseID ='\"+houseID+\"'\";\r\n        try {\r\n            PreparedStatement preparedStatement = (PreparedStatement)this.connection.prepareStatement(sql);\r\n            preparedStatement.executeUpdate();\r\n            preparedStatement.close();\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    //获得房源评价分数\r\n    public float getHouseScore(String houseID){\r\n        String sql = \"select score from house where houseID='\"+houseID+\"'\";\r\n        float temp=0;\r\n        try {\r\n            Statement statement = this.connection.createStatement();\r\n            ResultSet resultSet = statement.executeQuery(sql);\r\n            while (resultSet.next()){\r\n                temp=resultSet.getFloat(\"score\");\r\n            }\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return temp;\r\n    }\r\n\r\n    //搜索房源\r\n    public ArrayList<House> selectBasicHouse(String position,String village, double mimSize, double maxSize, double minPrice,double maxPrice, float score, int time) throws ParseException {\r\n        ArrayList<House> houses = new ArrayList<House>();\r\n        String sql=\"select * from house where\";\r\n        if(position!=\"\"){\r\n            sql+=\" location LIKE '\"+position+\"%' and \";\r\n        }\r\n        if(village!=\"\")\r\n            sql+=\" village = '\"+village+\"' and \";\r\n        sql+=\" size >\"+mimSize;\r\n        sql+=\" and size <\"+maxSize;\r\n        sql+=\" and price >\"+minPrice;\r\n        sql+=\" and price <\"+maxPrice;\r\n        sql+=\" and score >\"+score;\r\n\r\n        //将现在的时间减去给的时间\r\n        SimpleDateFormat formatter= new SimpleDateFormat(\"yyyy-MM-dd\");\r\n        Date date = new Date(System.currentTimeMillis());\r\n        String temp= formatter.format(date);\r\n        String str1=temp.substring(0, temp.indexOf(\"-\"));\r\n        String str2=temp.substring(str1.length()+1, temp.length());\r\n        int m=Integer.valueOf(str1.toString());\r\n        m-=time;\r\n        str1 = String.valueOf(m);\r\n        temp=str1+'-'+str2;\r\n\r\n\r\n        sql+=\" and time >'\"+temp+\"'\";\r\n        System.out.println(sql);\r\n        try {\r\n            Statement statement = (Statement)this.connection.createStatement();\r\n            ResultSet resultSet = (ResultSet)statement.executeQuery(sql);\r\n            while (resultSet.next()){\r\n                House house=new House();\r\n                house.setHouseID(resultSet.getString(\"houseID\"));\r\n                house.setSellerID(resultSet.getString(\"sellerID\"));\r\n                house.setScore(resultSet.getFloat(\"score\"));\r\n                house.setPrice(resultSet.getDouble(\"price\"));\r\n                house.setSize(resultSet.getDouble(\"size\"));\r\n                house.setLocation(resultSet.getString(\"location\"));\r\n                house.setVillage(resultSet.getString(\"village\"));\r\n                //测试用，正式上线删\r\n                System.out.println(resultSet.getString(\"houseID\")+\r\n                        resultSet.getString(\"sellerID\")+\r\n                        resultSet.getDouble(\"price\")+\r\n                        resultSet.getDouble(\"size\")\r\n                        + resultSet.getFloat(\"score\")\r\n                        +resultSet.getString(\"location\"));\r\n                houses.add(house);\r\n            }\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return houses;\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- SpringBoot RESTful/src/main/java/connector/HouseDBconnection.java	(revision 46809e44a8aca8b3ae7fe59ec1427c80649de319)
+++ SpringBoot RESTful/src/main/java/connector/HouseDBconnection.java	(date 1588086511673)
@@ -42,8 +42,10 @@
         }
         //加上一个查询先有houseID最大值的，给houseID赋值
         house.setHouseID(selectMaxHouseID());
-        String sql="insert into house(village,time,houseID,sellerID, size, locationX, locationY, location, price,score, lift, lastTransaction, houseType, buildingArea, interiorArea, houseOrientation, decoration, heatingMode, floor, houseTypeStructure, buildingType, elevatorProportion, listingTime, housingAge, mortgageInformation, transactionOwnership, housingPurpose, propertyOwnership, housingParts)" +
-                " values('"+house.getVillage()+"','"+house.getTime()+"','"
+        house.setCount(0);
+        String sql="insert into house(count,village,time,houseID,sellerID, size, locationX, locationY, location, price,score, lift, lastTransaction, houseType, buildingArea, interiorArea, houseOrientation, decoration, heatingMode, floor, houseTypeStructure, buildingType, elevatorProportion, listingTime, housingAge, mortgageInformation, transactionOwnership, housingPurpose, propertyOwnership, housingParts)" +
+                " values("+house.getCount()+",'"
+                +house.getVillage()+"','"+house.getTime()+"','"
                 +house.getHouseID()+"',"+house.getLocationX()
                 +","+house.getLocationY()+",'"+house.getLocation()+"',"
                 +house.getPrice()+","+house.getScore()+","
@@ -131,7 +133,8 @@
                 String housingPurpose = resultSet.getString("housingPurpose");
                 String propertyOwnership = resultSet.getString("propertyOwnership");
                 String housingParts = resultSet.getString("housingParts");
-                House housetemp=new House(village,time,
+                int count=resultSet.getInt("count");
+                House housetemp=new House(count,village,time,
                         houseID, sellerID,
                         size,locationX,
                         locationY,location,
@@ -160,7 +163,7 @@
         return house;
     }
 
-    //返回所有house
+    //返回所有house 没有用到
     public  ArrayList<House> getHouses() {
         String sql = "select * from house ";
         ArrayList<House> houses = new ArrayList<House>();
@@ -197,7 +200,8 @@
                 String housingPurpose = resultSet.getString("housingPurpose");
                 String propertyOwnership = resultSet.getString("propertyOwnership");
                 String housingParts = resultSet.getString("housingParts");
-                House house=new House(village,time,
+                int count=resultSet.getInt("count");
+                House house=new House(count,village,time,
                         houseID, sellerID,
                         size,locationX,
                         locationY,location,
@@ -236,6 +240,7 @@
                 house.setSize(resultSet.getDouble("size"));
                 house.setLocation(resultSet.getString("location"));
                 house.setVillage(resultSet.getString("village"));
+                house.setCount(resultSet.getInt("count"));
                 //测试用，正式上线删
                 System.out.println(resultSet.getString("houseID")+
                         resultSet.getString("sellerID")+
@@ -264,7 +269,7 @@
     }
 
     //修改房源评价分数
-    public void changeHouseScore(float score, String houseID){
+    public  void changeHouseScore(float score, String houseID){
         String sql = "UPDATE house SET score = "+score+" WHERE houseID ='"+houseID+"'";
         try {
             PreparedStatement preparedStatement = (PreparedStatement)this.connection.prepareStatement(sql);
@@ -276,7 +281,7 @@
     }
 
     //获得房源评价分数
-    public float getHouseScore(String houseID){
+    public  float getHouseScore(String houseID){
         String sql = "select score from house where houseID='"+houseID+"'";
         float temp=0;
         try {
